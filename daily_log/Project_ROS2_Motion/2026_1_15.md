# 일일개발 보고서 2026_1_15

# 1. 요약
강의주제 : DRL 기반 모션 및 제어기술 탐색 및 검증
강의1 : 3일차 브리핑, 실무 프로젝트의 business requirements, system requirements 브리핑
강의2 : DRL 언어와 DART-Studio
과제1 : DRL로 기어조립 종합 완성
과제2 : 9개 블록 pallet에 채워넣기/정렬

# 2. 세부사항
## 강의1 진행내용 및 피드백 : 전일 개발사항 확인, 실무 프로젝트 체계화 
-개발내용 체계화 필요(문제인식, 접근방식, 해결, 기반기술(트러블 슈팅))

## 강의2 진행내용 : DART-Studio 실행 및 확인

## 과제1 : DRL로 기어조립 종합 완성
### Mission 1: No-Code 기반 모션 스크립트의 DRL 변환 및 하드웨어 제어권 분석
1. 문제 인식 (Problem Definition)

과제: DART-Platform(GUI 기반)에서 작성된 Sun Gear 조립 로직을 로봇 제어 언어(DRL, Doosan Robot Language)로 변환하고, 실제 하드웨어에서의 실행 무결성을 검증해야 함.

기술적 목표: GUI 상의 추상화된 블록 코드가 실제 컨트롤러 내부에서 어떤 함수와 파라미터로 매핑(Mapping)되어 작동하는지 문법적 구조를 파악하고, 텍스트 기반 제어 환경(DART-Studio)으로의 전환 가능성 타진.

2. 접근 방식 (Approach)

Reverse Engineering (역공학): 자동 생성된 DRL 스크립트를 라인 바이 라인(Line-by-Line)으로 분석하여, 블록 코딩의 논리 흐름이 실제 DRL 함수(movel, movej 등)로 어떻게 구현되었는지 대조 분석.

Execution Verification: 시뮬레이션 환경이 아닌 실제 로봇 컨트롤러에 코드를 업로드하여, 변환 과정에서의 데이터 손실이나 로직 왜곡이 없는지 '동작 일치성' 확인.

3. 해결 (Solution)

스크립트 정합성 확보: GUI 환경에서 설계된 조립 시퀀스가 텍스트 기반 환경에서도 오차 없이 수행됨을 검증. 향후 복잡한 알고리즘 구현을 위해 블록 코딩 대신 DRL을 직접 수정할 수 있는 베이스라인 코드 확보.

4. 기반 기술 및 트러블 슈팅 (Core Tech & Troubleshooting)

이슈: 티칭 펜던트(Teaching Pendant)의 하드웨어 긴급 정지(E-Stop) 버튼이 눌린 상태에서, 소프트웨어(DART-Studio)가 로봇의 제어권(Control Authority)을 가져오지 못하는 '통신 대기' 현상 발생.

원인 분석: 두산 로보틱스 컨트롤러의 Safety Interlock(안전 상호 잠금) 설계상, 물리적 E-Stop 신호가 해제(Release)되지 않으면 소프트웨어 레벨의 서보 온(Servo On) 명령이 하드웨어단에서 차단됨을 확인.

해결: E-Stop 버튼의 물리적 해제 -> 서보 리셋 -> 소프트웨어 연결 재시도 프로세스를 정립하여, 하드웨어 안전장치와 소프트웨어 제어권 간의 우선순위(Hardware Priority) 메커니즘을 이해하고 절차화함.


## 과제2 : 9개 블록 pallet에 채워넣기/정렬
[Mission 2: Force Feedback 기반의 블록 높이 측정 및 적재(Palletizing) 시스템]
1. 문제 인식 (Problem Definition)

과제: 비전 센서(Vision Sensor) 없이, 로봇의 힘/토크 센서(Force/Torque Sensor)만을 활용하여 불규칙한 높이의 블록을 식별하고 지정된 그리드(3x3 Pallet)에 정렬해야 함.

기술적 난제:

Blind Grasping: 시각 정보 없이 물리적 접촉(Contact)만으로 물체의 유무와 Z축 높이를 추정해야 하는 '촉각(Tactile) 기반 인식' 문제.

협업 효율성: 4인 1팀 환경에서 단일 로봇 제어 코드를 어떻게 분업화하여 개발할 것인가에 대한 아키텍처 설계 필요.

2. 접근 방식 (Approach)

API 기반의 빠른 프로토타이핑: 두산 로보틱스 내장 함수인 get_pattern_point를 활용하여 복잡한 그리드 좌표 계산 로직을 추상화함. 이를 통해 기구학적 계산 실수를 방지하고 비즈니스 로직(분류 및 적재) 구현에 집중.

기능 모듈화 (Modular Architecture): 전체 프로세스를 Sensing(높이 측정), Decision(분류 로직), Action(이동 및 파지)으로 모듈화하여 팀원 간 코드 충돌을 방지하고 디버깅 효율을 높임.

3. 해결 (Solution)

높이 추정 로직 구현: 로봇이 하강하다가 물체에 닿는 순간의 Z축 좌표를 check_force_condition으로 감지하고, 해당 데이터를 기반으로 블록의 종류를 판별하는 알고리즘 구축.

프로젝트 스코프 관리: 제한된 개발 시간 내에 전체 정렬(Sorting) 로직을 완성하기보다, 가장 핵심 기술인 **'접촉 감지의 신뢰성 확보(Reliable Contact Detection)'**를 우선순위로 두어 개발 완료. (분류/정렬은 알고리즘 설계 단계까지 진행)

4. 기반 기술 및 트러블 슈팅 (Core Tech & Troubleshooting)

이슈: 순응 제어(Compliance Control) 모드에서 블록 접촉 시, 로봇이 멈추지 않고 계속 진행하거나 tp_popup 이벤트가 트리거되지 않는 미검출(False Negative) 현상 발생.

원인 분석: 초기 설정된 힘 감지 임계값(Threshold)이 2.0N으로, 가벼운 블록이 주는 반발력보다 높게 설정되어 있어 접촉을 '노이즈'로 무시함.

해결: Parameter Tuning(파라미터 튜닝) 수행. 임계값을 0.1N 단위로 하향 조정하며 테스트한 결과, 노이즈 없이 접촉을 감지하는 최적값 0.5N을 도출하여 물체 파손 방지 및 인식률 100% 달성.

# 3. 레퍼런스
**committ** : 모듈단위 개발개념 이해 및 실습
**src**
- [Check Pos Cond Default](../../src/Project_ROS2_Motion/2026_01_15_1_Check_Pos_Cond_Default.png)
- [Gripper Fail Screen](../../src/Project_ROS2_Motion/2026_01_15_2_Gripper_Fail_Screen.mov)
- [Gripper Fail Front](../../src/Project_ROS2_Motion/2026_01_15_3_Gripper_Fail_Front.mov)
- [Gripper Fail Side](../../src/Project_ROS2_Motion/2026_01_15_4_Gripper_Fail_Side.mp4)
- [DART Success Front](../../src/Project_ROS2_Motion/2026_01_15_5_DART_Success_Front.mov)
- [DART Success Side](../../src/Project_ROS2_Motion/2026_01_15_6_DART_Success_Side.mp4)
- [Get Pattern Point](../../src/Project_ROS2_Motion/2026_01_15_7_Get_Pattern_Point.mp4)
- [Get Pattern Point Code](../../src/Project_ROS2_Motion/2026_01_15_8_Get_Pattern_Point_Code.mov)
- [Gripper Open Close Test](../../src/Project_ROS2_Motion/2026_01_15_9_Gripper_Open_Close_Test.mov)
- [Collision Avoidance Code](../../src/Project_ROS2_Motion/2026_01_15_10_Collision_Avoidance_Code.mov)
- [Pallet Task Integration](../../src/Project_ROS2_Motion/2026_01_15_11_Pallet_Task_Integration.mov)
- [Pallet Task Progress](../../src/Project_ROS2_Motion/2026_01_15_12_Pallet_Task_Progress.mp4)
- [Pallet Task Physical](../../src/Project_ROS2_Motion/2026_01_15_13_Pallet_Task_Physical.mp4)
- [Collision Log 1](../../src/Project_ROS2_Motion/2026_01_15_14_Collision_Log_1.png)
- [Collision Log 2](../../src/Project_ROS2_Motion/2026_01_15_15_Collision_Log_2.png)



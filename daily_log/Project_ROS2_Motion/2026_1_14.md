1. 금일 R&D 이슈 (Today's R&D Challenge)
Situation:

DART-Platform 기반의 로봇 구동 환경을 구축하고, 썬 블록(Target Object)을 A지점에서 B지점으로 이송하는 Pick and Place Task를 수행함.

초기 모션 테스트 중 하강(Descent) 단계에서 End-Effector가 작업대 바닥과 물리적으로 충돌하여 비상 정지(Emergency Stop)가 트리거됨.

Analysis:

단순한 좌표 입력 오류라기보다는 TCP(Tool Center Point) 오차 및 Sim2Real Gap에 기인한 문제로 판단됨.

또한, 경로 생성 시 MoveJ(관절 보간)와 MoveL(직선 보간)의 혼용 과정에서 Singularity(특이점) 회피와 작업 공간(Workspace)의 한계에 대한 고려가 필요함을 확인함.

2. 제어 전략 및 구현 (Control Strategy)
Algorithm Selection: Joint Space vs Task Space

전략: 안전과 정밀도를 모두 확보하기 위해 구간별 제어 방식을 이원화함.

MoveJ (Joint Space Control): 장애물이 없는 자유 공간(Free Space)에서의 빠른 이동 및 초기 접근 시 사용. IK(역기구학) 연산 부하를 줄이고 관절의 최단 경로를 생성하여 특이점 문제를 최소화함.

MoveL (Task Space Control): 썬 블록을 파지(Grasping)하기 위한 수직 하강/상승 및 정밀 접근 시 사용. End-Effector가 수직 직선을 유지해야 하므로 필수적이나, 특이점 근처에서의 속도 저하 리스크를 관리해야 함.

Implementation Logic:

Home to Approach: MoveJ로 목표물 상단 10cm 지점까지 빠르게 이동 (Tool 끝단 궤적 무관).

Approach to Pick: MoveL로 Z축 수직 하강 (정밀도 요망).

Gripper Actuation: Digital I/O를 통한 Grasping 신호 인가.

Retract & Transport: MoveL로 상승 후, MoveJ로 목적지 상공 이동.

3. 검증 및 트러블 슈팅 (Verification)
Critical Issue: Floor Collision (Sim2Real Gap)

[현상] MoveL을 통한 Z축 하강 중 그리퍼 팁이 바닥면을 강하게 타격('쿵' 소음)하며 로봇 컨트롤러가 과부하(Torque Overload)를 감지하고 Halt 상태로 전환됨.

[원인 분석] 시뮬레이터 상의 바닥(Z=0)과 실제 물리적 환경의 바닥 높이 간에 미세한 오차(Mounting Tilt, Surface Unevenness)가 존재했음. 또한, 그리퍼 장착 후 TCP Z-offset 값이 정밀하게 보정되지 않아, 로봇은 아직 공중에 있다고 판단했으나 실제로는 바닥에 닿음.

[해결]

Recovery: 직접 교시(Direct Teaching) 모드로 전환하여 관절 토크를 해제하고 안전 위치로 수동 복구.

Calibration: 바닥 충돌 방지를 위해 **Safety Margin(안전 마진)**을 적용, 목표 Z 좌표에 +Offset (예: 2~3mm)을 부여하여 코드 수정.

Validation: DART 시뮬레이션 상의 TCP 좌표와 실제 TCP의 물리적 위치를 재측정하여 동기화.

Minor Issue: Jerky Motion (Motion Profiling)

[현상] 웨이포인트(경유지)를 지날 때마다 로봇이 멈칫거리는 불연속적인 움직임 발생.

[통찰] 각 동작 명령(Command) 사이의 속도가 0으로 수렴했다가 다시 가속하기 때문임. 추후 Blending (Trajectory Smoothing) 기능을 적용하여, blend_radius 내에서 감속 없이 다음 경로로 곡선 주행하도록 프로파일 최적화 예정.

4. 로보틱스 핵심 이론 (Robotics Theory)
Topic: Interpolation (보간법) & TCP Calibration

Insight:

로봇 제어에서 TCP 설정은 단순히 '끝점'을 정의하는 것을 넘어, 로봇의 전체 Kinematics Chain(기구학적 사슬)의 마지막 링크를 정의하는 핵심 과정임을 깨달음. TCP가 틀어지면 아무리 완벽한 Path Planning 알고리즘도 물리적 충돌을 야기함.

**MoveJ(PTP)**는 관절 모터 입장에서 가장 편안한(에너지 효율적) 움직임이지만, **MoveL(Linear)**은 카테시안 공간(Cartesian Space)의 직선을 유지하기 위해 모든 관절이 실시간으로 비선형적인 속도 변화를 겪어야 하므로, 제어 난이도가 훨씬 높음을 체감함.

5.레퍼런스
**src** : 
- [Async Motion Test](../../src/Project_ROS2_Motion/2026_01_14_1_Async_Motion_Test.mp4)
- [Sync Motion Test](../../src/Project_ROS2_Motion/2026_01_14_2_Sync_Motion_Test.mp4)
- [Floor Collision Crush](../../src/Project_ROS2_Motion/2026_01_14_3_Floor_Collision_Crush.png)
- [Spiral Motion Path](../../src/Project_ROS2_Motion/2026_01_14_4_Spiral_Motion_Path.png)
- [Sun Gear Move](../../src/Project_ROS2_Motion/2026_01_14_5_Sun_Gear_Move.mp4)
- [Sun Gear Repeat](../../src/Project_ROS2_Motion/2026_01_14_6_Sun_Gear_Repeat.png)
- [Sync Async Compare](../../src/Project_ROS2_Motion/2026_01_14_7_Sync_Async_Compare.png)
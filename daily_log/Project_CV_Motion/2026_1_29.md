# 📅 일일 개발 보고서 (Daily Dev Report)

**작성일:** 2026년 1월 29일
**작성자:** MARKCH
**주제:** RealSense D435i 개발 환경 구축 및 로봇 비전 통신 최적화

---

### 1. 문제인식 (Problem Recognition)
* **초기 설정 오류:** RealSense ROS2 Wrapper 실행 시, 사용자가 지정한 해상도(`640x480`)가 적용되지 않고 고해상도(`1280x720`, `848x480`)로 강제 복구(Fallback)되는 현상 발생.
* **센서 하드웨어 충돌:** 노드는 실행되나 `Depth stream start failure` 오류와 함께 Depth 센서가 비활성화되는 하드웨어 락(Lock) 현상 확인.
* **통신 불안정:** 기본 연결 시 USB 대역폭 혹은 전력 문제로 추정되는 프로세스 불안정성으로 인해, 매번 전체 프로세스를 재시작(Kill & Restart)해야 하는 비효율 발생.

### 2. 접근방식 (Approach)
* **로그 분석:** `ros2 launch` 실행 로그를 한 줄씩 분석하여 파라미터 파싱(Parsing) 에러 및 하드웨어 알림(Notification) 원인 파악.
* **파라미터 튜닝:** ROS2 파라미터 문법 준수 여부 확인 및 대역폭 확보를 위한 불필요한 센서(IMU) 비활성화 전략 수립.
* **데이터 무결성 검증:** CLI 도구(`ros2 topic hz`, `ros2 topic echo`)를 활용하여 토픽 수신율 및 데이터 패킷(Pixel Data) 정상 수신 여부 모니터링.
* **이론 학습 병행:** RGB Camera와 로봇 간의 좌표계 일치를 위한 Calibration 이론(Checker board, Eye-in-hand) 및 3차원 좌표 추정 원리 학습.

### 3. 해결 (Solution)
* **구문 오류 수정:** Launch 파일 인자 전달 시 구분자 오타(`*` -> `x`)를 수정하여 `640x480x30` 프로파일 정상 로드.
* **안정적 실행 커맨드 구축:** Depth/RGB 스트림 안정성을 위해 **IMU(Gyro, Accel)를 비활성화**하고 `initial_reset`을 포함한 Alias 명령어 확립.
    > `enable_gyro:=false enable_accel:=false` 옵션 추가
* **통신 검증 완료:** 수정된 설정을 통해 `/camera/camera/color/image_raw` 토픽이 평균 **30.00 Hz**로 안정적으로 수신됨을 확인.

### 4. 기반기술 (Base Technology)
* **H/W & Driver:** Intel RealSense D435i, RealSense SDK 2.0, USB 3.2 Protocol.
* **M/W (ROS2):** ROS2 Launch System, DDS (Data Distribution Service) QoS, Topic Monitoring Tools.
* **Computer Vision:**
    * **Camera Calibration:** Intrinsic(내부)/Extrinsic(외부) 파라미터 추출.
    * **Eye-in-hand:** 로봇 말단(End-effector)에 부착된 카메라와 로봇 베이스 간의 좌표 변환 행렬(T_base^cam) 계산.
    * **3D Reconstruction:** Depth Map을 이용한 Pointcloud(x, y, z) 생성 원리.

### 5. 트러블 슈팅 (Troubleshooting)

| 이슈 (Issue) | 원인 (Cause) | 조치 내용 (Action) |
| :--- | :--- | :--- |
| **Invalid Value Error** | 해상도 설정 시 `640*480`으로 입력 (Syntax Error) | 구분자를 `x`로 변경 (`640x480`)하여 정상 프로파일 로드 |
| **Depth Stream Failure** | 초기화 시 IMU 센서 동시 활성화로 인한 USB 대역폭/전력 부하 | `enable_gyro:=false`, `enable_accel:=false` 옵션 추가로 부하 감소 |
| **Process Hang** | 카메라 내부 State 꼬임 현상 (Sensor Lock) | USB 물리적 재연결(Re-plug) 및 `initial_reset:=true` 옵션 조합 |
| **RTPS_SHM Error** | FastDDS 공유 메모리 초기화 실패 (권한/잔여 파일 문제) | 데이터 통신에는 지장 없는 경고임(UDP 우회)을 확인하고 무시(Benign) |

---

### 💡 금일 프로젝트 진행 사항
* **아이디어 선정:** 화장대 정리 로봇 (Object Detection 및 Pick & Place 기반)
* **진척도:** 비전 센서 통신 환경 구축 완료 -> 다음 단계: 객체 인식을 위한 데이터셋 수집 예정

### 6.레퍼런스

* **Commit:** : 개발환경 확인 및 통신 테스트 진행
* **SRC:**

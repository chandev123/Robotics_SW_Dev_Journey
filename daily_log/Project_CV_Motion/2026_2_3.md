# [일일 개발 보고서] Cocooker 프로젝트 - 6일차

## 1. 개발 목표
* **ROS 2 시스템 통합:** `robot_control` 노드에 단위 모듈(`open_fridge` 등) 기능 이식 및 통합 동작 테스트.

## 2. 주요 트러블 슈팅 및 분석 내용

### (1) 모듈 통합 간 자원 점유 충돌 (RG2 그리퍼)
* **작업 내용:** 동료의 `fridge_rightdown_open.py` 코드를 `robot_control.py`에 삽입.
* **문제점:** RG2 그리퍼 컨트롤러 객체의 중복 선언으로 인해 연결이 Blocking(차단) 되는 현상 발생.
* **결과:** 컨트롤러의 전역 모듈화 필요성 확인 및 동시성 이슈 해결.

### (2) Service 통신 블로킹 및 노드 비정상 종료 (Critical)
* **현상:**
    * `/pick_and_place` 노드(Client)가 Depth 정보를 요청했으나, `/detect` 노드(Server)가 응답을 반환하지 못하고 먼저 사망(Killed).
    * 이후 `/pick_and_place` 노드도 사망함.
    * **특이사항:** 로봇 하드웨어와 직접 연결된 제어 노드는 살아있으나, 영상 처리를 담당하는 디텍션 노드가 먼저 죽는 현상 발견.
* **원인 분석 (Code Logic):**
    * Service의 비동기 처리를 위해 `add_done_callback` 함수를 사용함.
    * 그러나 콜백 함수 내부의 `while` 문이 데이터를 수신하지 못하고 **무한 루프(Infinite Loop)**에 빠짐.

### (3) 매니퓰레이터 기구학적 특이점 (Singularity)
* **현상:** 로봇팔이 목표 위치로 이동하던 중 관절이 **급격하게 회전(확 도는 현상)**하거나 멈춤
7번 영상 8초 첨부.

* **분석:** 로봇의 Wrist Singularity(손목 특이점) 구간 진입에 따른 회피 기동임을 확인.
* **향후 계획:** 경유점 삽입 전 오류 발생 위치 확인 및 수정 예정.

### (4) 환경 설정 오류 (CUDA)
* **현상:** 실행 도중 `RuntimeError` 발생.
* **원인:** PyTorch/TensorFlow 등에서 GPU 장치를 찾지 못하거나 커널 이미지가 없는 호환성 문제(CUDA Error).
* **대응:** 버전 호환성 검토 및 `tflite_runtime` 모듈 버전 재설정, 환경설정 완료.

## 3.레퍼런스
* **commit:**
* **src:**
    * [2026_02_03_1_Resource_Conflict_Integration_1.mp4](../../src/Project_CV_Motion/2026_02_03_1_Resource_Conflict_Integration_1.mp4)
    * [2026_02_03_2_Resource_Conflict_Integration_2.mp4](../../src/Project_CV_Motion/2026_02_03_2_Resource_Conflict_Integration_2.mp4)
    * [2026_02_03_3_Detect_Node_Crash_Service_Block.png](../../src/Project_CV_Motion/2026_02_03_3_Detect_Node_Crash_Service_Block.png)
    * [2026_02_03_4_Depth_Service_Blocking_Issue.png](../../src/Project_CV_Motion/2026_02_03_4_Depth_Service_Blocking_Issue.png)
    * [2026_02_03_5_Service_Crash_Demo.mp4](../../src/Project_CV_Motion/2026_02_03_5_Service_Crash_Demo.mp4)
    * [2026_02_03_6_Manipulator_Singularity_Pose.jpg](../../src/Project_CV_Motion/2026_02_03_6_Manipulator_Singularity_Pose.jpg)
    * [2026_02_03_7_Wrist_Singularity_Avoidance.mp4](../../src/Project_CV_Motion/2026_02_03_7_Wrist_Singularity_Avoidance.mp4)
    * [2026_02_03_8_Cuda_Runtime_Error.png](../../src/Project_CV_Motion/2026_02_03_8_Cuda_Runtime_Error.png)
    * [2026_02_03_9_Troubleshooting_Log_Output.png](../../src/Project_CV_Motion/2026_02_03_9_Troubleshooting_Log_Output.png)

